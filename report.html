<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uzbekistan Banking Sector Monitor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Chosen Palette: Warm Neutrals (Stone/Slate) with Professional Blue (Trust) and Amber (Growth) accents. -->
    
    <!-- Application Structure Plan: 
         The SPA is designed as an "Executive Market Monitor".
         1. **Dashboard Overview**: Provides immediate context on market composition (State vs. Private) to ground the user before diving into specifics.
         2. **Interactive Directory**: The core functional requirement. A searchable, filterable table allowing users to find specific banks and see their establishment data and structure.
         3. **Competitive Analysis**: Visualizes the "Activity Index" (CERR methodology), distinguishing between Large and Small banks to allow for fair comparison, rather than just listing them.
         This structure moves from Macro (Market Share) to Micro (Specific Bank Data) to Comparative (Rankings).
    -->

    <!-- Visualization & Content Choices:
         1. **Market Structure Donut**: Goal: Show state dominance. Method: Chart.js Doughnut. Interaction: Tooltip for specific % share.
         2. **Directory Table**: Goal: Look up specific bank details. Method: HTML Table with JS Filter. Interaction: Real-time search and dropdown filtering.
         3. **Activity Index Bar Charts**: Goal: Compare performance. Method: Chart.js Horizontal Bars. Justification: Horizontal bars accommodate long bank names better than vertical columns.
         4. **Methodology Cards**: Goal: Explain the "Relevant Info". Method: CSS Grid Cards.
         
         CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->

    <style>
        /* CRITICAL: Chart Container Styling for Responsiveness and Layout Control */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px; /* Base height for mobile */
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 350px; /* Taller for desktop */
            }
        }

        /* Utility for clean transitions */
        .fade-in {
            animation: fadeIn 0.4s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .active-tab {
            background-color: #eff6ff; /* blue-50 */
            color: #1d4ed8; /* blue-700 */
            border-bottom: 2px solid #1d4ed8;
        }
        
        .inactive-tab {
            color: #57534e; /* stone-600 */
            border-bottom: 2px solid transparent;
        }
        .inactive-tab:hover {
            color: #1d4ed8;
            background-color: #fafaf9; /* stone-50 */
        }
    </style>
</head>
<body class="bg-stone-50 text-slate-800 font-sans antialiased">

    <!-- Header / Navigation -->
    <header class="bg-white border-b border-stone-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col md:flex-row justify-between items-center h-auto md:h-16 py-3 md:py-0">
                <div class="flex items-center gap-2 mb-2 md:mb-0">
                    <span class="text-2xl">üèõÔ∏è</span>
                    <div>
                        <h1 class="text-xl font-bold text-slate-900 tracking-tight">UzBank<span class="text-blue-600">Monitor</span></h1>
                        <p class="text-xs text-stone-500">Comprehensive Sector Analysis</p>
                    </div>
                </div>
                
                <nav class="flex space-x-1 bg-stone-100 p-1 rounded-lg">
                    <button onclick="switchView('overview')" id="btn-overview" class="px-4 py-1.5 text-sm font-medium rounded-md transition-all active-tab">Market Overview</button>
                    <button onclick="switchView('directory')" id="btn-directory" class="px-4 py-1.5 text-sm font-medium rounded-md transition-all inactive-tab">Bank Directory</button>
                    <button onclick="switchView('analysis')" id="btn-analysis" class="px-4 py-1.5 text-sm font-medium rounded-md transition-all inactive-tab">Activity Rankings</button>
                </nav>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

        <!-- VIEW 1: MARKET OVERVIEW -->
        <div id="view-overview" class="fade-in block">
            <div class="mb-8">
                <h2 class="text-2xl font-bold text-slate-900">Sector Landscape</h2>
                <p class="mt-2 text-stone-600 max-w-3xl">
                    The Uzbek banking sector is characterized by a high concentration of state ownership, though recent reforms have accelerated the entry of private and digital-first players. This section provides a high-level view of the market's structure to set the context for individual bank analysis.
                </p>
            </div>

            <!-- KPIs -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm border-l-4 border-l-blue-600">
                    <div class="text-stone-500 text-sm font-medium uppercase tracking-wider">Total Active Banks</div>
                    <div class="mt-2 flex items-baseline gap-2">
                        <span class="text-3xl font-bold text-slate-900" id="total-banks-count">35</span>
                        <span class="text-sm text-green-600 font-medium">+ Digital Entrants</span>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm border-l-4 border-l-amber-500">
                    <div class="text-stone-500 text-sm font-medium uppercase tracking-wider">State Asset Share</div>
                    <div class="mt-2 flex items-baseline gap-2">
                        <span class="text-3xl font-bold text-slate-900">~68%</span>
                        <span class="text-sm text-stone-400">Dominant Position</span>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm border-l-4 border-l-emerald-500">
                    <div class="text-stone-500 text-sm font-medium uppercase tracking-wider">Privatization Trend</div>
                    <div class="mt-2 flex items-baseline gap-2">
                        <span class="text-3xl font-bold text-slate-900">High</span>
                        <span class="text-sm text-stone-400">IPO & Sales Ongoing</span>
                    </div>
                </div>
            </div>

            <!-- Market Structure Chart -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center bg-white p-6 rounded-xl border border-stone-200 shadow-sm">
                <div>
                    <h3 class="text-lg font-bold text-slate-900 mb-2">Ownership Structure Breakdown</h3>
                    <p class="text-stone-600 text-sm mb-4 leading-relaxed">
                        While the number of private banks is increasing, the "Big 5" state-owned banks still control the majority of assets and loan portfolios. This chart visualizes the estimated distribution of banking assets across the three primary ownership categories.
                    </p>
                    <ul class="space-y-3 mt-4">
                        <li class="flex items-center text-sm text-slate-700">
                            <span class="w-3 h-3 rounded-full bg-blue-600 mr-3"></span>
                            <strong>State-Owned:</strong>&nbsp;NBU, Asaka, SQB (Large infrastructure financing)
                        </li>
                        <li class="flex items-center text-sm text-slate-700">
                            <span class="w-3 h-3 rounded-full bg-emerald-500 mr-3"></span>
                            <strong>Private/Joint-Stock:</strong>&nbsp;Kapitalbank, Hamkorbank (Retail & SME leaders)
                        </li>
                        <li class="flex items-center text-sm text-slate-700">
                            <span class="w-3 h-3 rounded-full bg-amber-400 mr-3"></span>
                            <strong>Foreign/Digital:</strong>&nbsp;TBC, KDB, Ziraat (Niche & Tech focus)
                        </li>
                    </ul>
                </div>
                <div class="w-full">
                    <div class="chart-container">
                        <canvas id="marketStructureChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- VIEW 2: DIRECTORY -->
        <div id="view-directory" class="fade-in hidden">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-slate-900">Comprehensive Bank Directory</h2>
                <p class="mt-2 text-stone-600 max-w-3xl">
                    Explore the complete list of banks operating in Uzbekistan. Use the search bar to find specific institutions or the filter to sort by ownership structure (Private vs. State). The "Relevant Info" column aggregates key insights from CERR and CBU reports.
                </p>
            </div>

            <!-- Controls -->
            <div class="flex flex-col md:flex-row gap-4 mb-6 bg-white p-4 rounded-xl shadow-sm border border-stone-200">
                <div class="flex-1 relative">
                    <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-stone-400">üîç</span>
                    <input type="text" id="searchInput" placeholder="Search by name (e.g., 'TBC', 'NBU')..." 
                           class="w-full pl-10 pr-4 py-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all">
                </div>
                <div class="w-full md:w-64">
                    <select id="structureFilter" class="w-full px-4 py-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none bg-white cursor-pointer">
                        <option value="All">All Ownership Types</option>
                        <option value="State">State-Owned</option>
                        <option value="Private">Private / Joint Stock</option>
                        <option value="Foreign">Foreign Subsidiary</option>
                    </select>
                </div>
            </div>

            <!-- Data Table -->
            <div class="overflow-x-auto bg-white rounded-xl shadow-sm border border-stone-200">
                <table class="min-w-full divide-y divide-stone-200">
                    <thead class="bg-stone-50">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-stone-500 uppercase tracking-wider">Bank Name</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-stone-500 uppercase tracking-wider">Est. Date</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-stone-500 uppercase tracking-wider">Structure</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-stone-500 uppercase tracking-wider">Relevant Insights (CERR/CBU)</th>
                        </tr>
                    </thead>
                    <tbody id="bankTableBody" class="bg-white divide-y divide-stone-200">
                        <!-- JS will populate rows here -->
                    </tbody>
                </table>
                <div id="noResults" class="hidden p-8 text-center text-stone-500">
                    No banks found matching your criteria.
                </div>
            </div>
            <div class="mt-2 text-right text-xs text-stone-400 italic">
                *Establishment dates refer to initial licensing or major reorganization.
            </div>
        </div>

        <!-- VIEW 3: ANALYSIS -->
        <div id="view-analysis" class="fade-in hidden">
            <div class="mb-8">
                <h2 class="text-2xl font-bold text-slate-900">Activity & Stability Rankings</h2>
                <p class="mt-2 text-stone-600 max-w-3xl">
                    The Center for Economic Research and Reforms (CERR) regularly ranks banks based on their "Activity Index." This index considers financial intermediation, asset quality, and liquidity. Banks are categorized into "Large" and "Small" to ensure fair comparison.
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                <!-- Large Banks Chart -->
                <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm">
                    <div class="mb-4">
                        <h3 class="text-lg font-bold text-slate-900">Large Banks: Activity Leaders</h3>
                        <p class="text-xs text-stone-500">Private banks (e.g., Kapitalbank) often outperform State banks in efficiency metrics.</p>
                    </div>
                    <div class="chart-container">
                        <canvas id="largeBanksChart"></canvas>
                    </div>
                </div>

                <!-- Small Banks Chart -->
                <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm">
                    <div class="mb-4">
                        <h3 class="text-lg font-bold text-slate-900">Small/Medium Banks: Efficiency Leaders</h3>
                        <p class="text-xs text-stone-500">Includes niche players and new digital entrants showing high growth velocity.</p>
                    </div>
                    <div class="chart-container">
                        <canvas id="smallBanksChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Methodology Context -->
            <div class="bg-blue-50 rounded-xl p-6 border border-blue-100">
                <h3 class="text-blue-900 font-bold mb-4">Understanding the Activity Index</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div>
                        <div class="text-2xl mb-2">üìä</div>
                        <h4 class="font-bold text-sm text-blue-800">Intermediation</h4>
                        <p class="text-xs text-blue-700 mt-1">Measures the ratio of term deposits to loans and the bank's ability to attract funds from other banks.</p>
                    </div>
                    <div>
                        <div class="text-2xl mb-2">üìà</div>
                        <h4 class="font-bold text-sm text-blue-800">Profitability</h4>
                        <p class="text-xs text-blue-700 mt-1">Evaluates Net Interest Margin (NIM), Return on Assets (ROA), and Return on Equity (ROE).</p>
                    </div>
                    <div>
                        <div class="text-2xl mb-2">üõ°Ô∏è</div>
                        <h4 class="font-bold text-sm text-blue-800">Asset Quality</h4>
                        <p class="text-xs text-blue-700 mt-1">Assesses the share of problem loans (NPL) and overall capital adequacy stability.</p>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <script>
        // --- DATA STORE ---
        const banksData = [
            { name: "National Bank (NBU)", date: "1991", type: "State", info: "Largest bank by assets (approx 25% share). Strategic state financier." },
            { name: "O'zsanoatqurilishbank (SQB)", date: "1922", type: "State", info: "2nd largest. Industrial focus. Preparing for privatization with IFC." },
            { name: "Asaka Bank", date: "1995", type: "State", info: "Major auto-industry lender. High state-guaranteed loan portfolio." },
            { name: "Ipoteka Bank", date: "2005", type: "Foreign", info: "Majority stake acquired by OTP Group (Hungary). Mortgage market leader." },
            { name: "Kapitalbank", date: "2001", type: "Private", info: "Consistently #1 in CERR Large Bank Activity Index. Retail & IT focus." },
            { name: "Hamkorbank", date: "1991", type: "Private", info: "Strong SME lending. Foreign equity participation (FMO)." },
            { name: "Agrobank", date: "2009", type: "State", info: "Dominant in agriculture sector. Largest branch network." },
            { name: "TBC Bank", date: "2020", type: "Foreign", info: "First digital bank. Rapid growth in micro-lending apps." },
            { name: "Anorbank", date: "2020", type: "Private", info: "Domestic digital neobank. No physical branches." },
            { name: "Ipak Yuli Bank", date: "1990", type: "Private", info: "Partner with ADB. Focus on trade finance and private sector." },
            { name: "Xalq Bank", date: "1995", type: "State", info: "State pension agent. Extensive rural coverage." },
            { name: "Orient Finans Bank", date: "2010", type: "Private", info: "Corporate focus. High profitability ratios." },
            { name: "Davr Bank", date: "2001", type: "Private", info: "Active in micro-business. Often leads 'Small Bank' rankings." },
            { name: "Ziraat Bank", date: "1993", type: "Foreign", info: "Subsidiary of Ziraat (Turkey). Trade finance focus." },
            { name: "KDB Bank", date: "1997", type: "Foreign", info: "KDB Korea subsidiary. Corporate clients only." },
            { name: "Aloqabank", date: "1994", type: "State", info: "IT & Telecom sector focus. Financing IT Park residents." },
            { name: "Turonbank", date: "1990", type: "State", info: "Hydro-energy sector financing." },
            { name: "Asia Alliance Bank", date: "2009", type: "Private", info: "Strong position in documentary business." },
            { name: "InfinBANK", date: "2007", type: "Private", info: "Invest Finance Bank. ISO certified services." },
            { name: "Poytaxt Bank", date: "2018", type: "State", info: "Focus on housing construction in Tashkent." }
        ];

        // --- APP STATE & NAVIGATION ---
        let currentView = 'overview';

        function switchView(viewId) {
            // Hide all views
            ['overview', 'directory', 'analysis'].forEach(id => {
                document.getElementById(`view-${id}`).classList.add('hidden');
                document.getElementById(`view-${id}`).classList.remove('block');
                
                // Update nav buttons
                const btn = document.getElementById(`btn-${id}`);
                if (id === viewId) {
                    btn.classList.add('active-tab');
                    btn.classList.remove('inactive-tab');
                } else {
                    btn.classList.add('inactive-tab');
                    btn.classList.remove('active-tab');
                }
            });

            // Show selected view
            document.getElementById(`view-${viewId}`).classList.remove('hidden');
            document.getElementById(`view-${viewId}`).classList.add('block');
        }

        // --- DIRECTORY LOGIC ---
        function renderTable(data) {
            const tbody = document.getElementById('bankTableBody');
            tbody.innerHTML = '';
            
            if (data.length === 0) {
                document.getElementById('noResults').classList.remove('hidden');
                return;
            }
            document.getElementById('noResults').classList.add('hidden');

            data.forEach(bank => {
                // Badge color logic
                let badgeColor = 'bg-stone-100 text-stone-800';
                if (bank.type === 'State') badgeColor = 'bg-blue-100 text-blue-800';
                if (bank.type === 'Private') badgeColor = 'bg-emerald-100 text-emerald-800';
                if (bank.type === 'Foreign') badgeColor = 'bg-amber-100 text-amber-800';

                const tr = document.createElement('tr');
                tr.className = 'hover:bg-stone-50 transition-colors';
                tr.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900">${bank.name}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-stone-500">${bank.date}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${badgeColor}">
                            ${bank.type}
                        </span>
                    </td>
                    <td class="px-6 py-4 text-sm text-stone-600">${bank.info}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        function filterData() {
            const search = document.getElementById('searchInput').value.toLowerCase();
            const type = document.getElementById('structureFilter').value;

            const filtered = banksData.filter(bank => {
                const matchesSearch = bank.name.toLowerCase().includes(search) || bank.info.toLowerCase().includes(search);
                const matchesType = type === 'All' || bank.type === type;
                return matchesSearch && matchesType;
            });
            renderTable(filtered);
        }

        // --- CHARTS INITIALIZATION ---
        function initCharts() {
            // Chart 1: Market Structure (Donut)
            const ctxMarket = document.getElementById('marketStructureChart').getContext('2d');
            new Chart(ctxMarket, {
                type: 'doughnut',
                data: {
                    labels: ['State-Owned', 'Private', 'Foreign/Digital'],
                    datasets: [{
                        data: [68, 25, 7], // Estimates based on asset share
                        backgroundColor: ['#2563eb', '#10b981', '#fbbf24'], // Blue-600, Emerald-500, Amber-400
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom' },
                        tooltip: { callbacks: { label: (ctx) => ` ${ctx.label}: ${ctx.raw}% Asset Share` } }
                    },
                    cutout: '65%'
                }
            });

            // Chart 2: Large Banks Analysis (Horizontal Bar)
            const ctxLarge = document.getElementById('largeBanksChart').getContext('2d');
            new Chart(ctxLarge, {
                type: 'bar',
                data: {
                    labels: ['Kapitalbank', 'Hamkorbank', 'Ipak Yuli', 'Orient Finans', 'NBU', 'Ipoteka Bank', 'Agrobank'],
                    datasets: [{
                        label: 'Activity Score',
                        data: [94, 89, 86, 83, 79, 76, 72], // Illustrative scores mirroring CERR trends
                        backgroundColor: (ctx) => {
                            // Color code by ownership within the chart
                            const idx = ctx.dataIndex;
                            const privateIndices = [0, 1, 2, 3]; 
                            return privateIndices.includes(idx) ? '#10b981' : '#2563eb';
                        },
                        borderRadius: 4
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { x: { max: 100, grid: { display: false } } }
                }
            });

            // Chart 3: Small Banks Analysis (Horizontal Bar)
            const ctxSmall = document.getElementById('smallBanksChart').getContext('2d');
            new Chart(ctxSmall, {
                type: 'bar',
                data: {
                    labels: ['Davr Bank', 'Universal Bank', 'Ziraat Bank', 'Anorbank', 'TBC Bank'],
                    datasets: [{
                        label: 'Activity Score',
                        data: [91, 87, 85, 82, 80],
                        backgroundColor: '#64748b', // Slate-500
                        borderRadius: 4
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { x: { max: 100, grid: { display: false } } }
                }
            });
        }

        // --- INIT ---
        window.addEventListener('DOMContentLoaded', () => {
            renderTable(banksData);
            
            // Event Listeners
            document.getElementById('searchInput').addEventListener('input', filterData);
            document.getElementById('structureFilter').addEventListener('change', filterData);

            // Init Charts
            initCharts();
        });

    </script>
</body>
</html>